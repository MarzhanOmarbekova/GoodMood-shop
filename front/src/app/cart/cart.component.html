<div class="cart-container">
  <h2>–ú–æ—è –∫–æ—Ä–∑–∏–Ω–∞</h2>

  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã...</p>
  </div>

  <div *ngIf="!loading && cartItems.length === 0" class="empty-state">
    <div class="empty-icon">üõí</div>
    <h3>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
    <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É, —á—Ç–æ–±—ã –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</p>
    <button routerLink="/" class="browse-btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º</button>
  </div>

  <div class="cart-content" *ngIf="!loading && cartItems.length > 0">
    <div class="cart-items">
      <div class="cart-item" *ngFor="let item of cartItems" [class.updating]="isUpdating(item.product_variant_id)">
        <div class="item-image-container" (click)="navigateToProduct(item.product_id)">
          <img [src]="item.product_main_image" [alt]="item.product_name" class="item-image" />
        </div>
        <div class="item-details">
          <h3 (click)="navigateToProduct(item.product_id)">{{item.product_name}}</h3>
          <p class="variant-info">Size: {{item.size}}</p>
          <div class="quantity-controls">
            <button (click)="decrementQuantity(item)" [disabled]="item.quantity <= 1">-</button>
            <span>{{item.quantity}}</span>
            <button (click)="incrementQuantity(item)" [disabled]="item.quantity >= item.stock">+</button>
          </div>
          <p class="price">{{item.item_total_price}} ‚ÇΩ</p>
          <button class="remove-btn" (click)="removeFromCart(item.product_variant_id)">
            <span class="icon">√ó</span>
            Remove
          </button>
        </div>
      </div>
    </div>

    <div class="cart-summary">
      <h3>–ò—Ç–æ–≥–æ –∑–∞–∫–∞–∑–∞</h3>
      <div class="summary-row">
        <span>–¢–æ–≤–∞—Ä—ã ({{cartItems.length}})</span>
        <span>{{ totalPrice }} ‚ÇΩ</span>
      </div>
      <div class="summary-row">
        <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
        <span>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
      </div>
      <div class="summary-total">
        <span>–ö –æ–ø–ª–∞—Ç–µ</span>
        <span>{{ totalPrice }} ‚ÇΩ</span>
      </div>
      <button class="checkout-btn" (click)="checkout()">
        –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
      </button>
    </div>
  </div>
</div>
